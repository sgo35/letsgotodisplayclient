<form>
  <div class="flex-container">
    <!-- <div class="news">
      <h2>Actualité</h2>
      <mat-button-toggle-group #newsGroup="matButtonToggleGroup"
      aria-label="Actualité"
        value="news">
        <mat-button-toggle value="today">Aujourd'hui</mat-button-toggle>
        <mat-button-toggle value="yesterday">Hier</mat-button-toggle>
        <mat-button-toggle value="week">sur 7 jours</mat-button-toggle>
      </mat-button-toggle-group>
    </div> -->
  </div>

  <!-- <mat-accordion>
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Personal data
        </mat-panel-title>
        <mat-panel-description>
          Type your name and age
        </mat-panel-description>
      </mat-expansion-panel-header>
      
      <mat-form-field>
        <input matInput placeholder="First name">
      </mat-form-field>
      
      <mat-form-field>
        <input matInput placeholder="Age">
      </mat-form-field>
    </mat-expansion-panel>
    <mat-expansion-panel (opened)="panelOpenState = true"
    (closed)="panelOpenState = false">
    <mat-expansion-panel-header>
      <mat-panel-title>
          Self aware panel
        </mat-panel-title>
        <mat-panel-description>
          Currently I am {{panelOpenState ? 'open' : 'closed'}}
        </mat-panel-description>
      </mat-expansion-panel-header>
      <p>I'm visible because I am open</p>
    </mat-expansion-panel>
  </mat-accordion> -->
  <mat-sidenav-container class="sidenav-container"
    autosize>
    <mat-sidenav #sidenav
      mode="side"
      (openedChange)="onPositionChanged($event)">
      <!-- <button mat-icon-button class="right"
      (click)="sidenav.toggle()">
      <i class="fas fa-angle-double-right"></i>
    </button> -->
      <p>Menu</p>
      <div>Coucou c'est le panneau de config</div>
      <ul class="noPuce widgetMenu">
        <li>
          <mat-slide-toggle class="editableMode"
            [checked]="editable"
            [disabled]="false"
            (change)="onActivateEdit($event.checked)">Mode Edition
          </mat-slide-toggle>
        </li>
        <li>
          <button mat-raised-button
            [disabled]="!editable"
            (click)="addWidget('WeatherComponent')">Météo</button>
        </li>
        <li>
          <button mat-raised-button
            [disabled]="!editable"
            (click)="addWidget('NewsComponent')">Actualité</button>
        </li>
        <li>
          <button mat-raised-button
            [disabled]="!editable"
            (click)="addWidget('MenuCantineComponent')">Menu cantine</button>
        </li>
      </ul>
      <button mat-raised-button
        class="fixedbutton"
        color="warn"
        (click)="sidenav.toggle()"><i class="fas fa-sign-out-alt"></i>&nbsp;Fermer</button>

    </mat-sidenav>

    <mat-sidenav-content>
      <div class="phantom fixedbutton">
        <button mat-icon-button
          (click)="sidenav.toggle()">
          <i class="fas fa-angle-double-right"
            [class.fa-rotate-180]="sidenavOpened"></i>
        </button>
      </div>
      <div>
        <ngx-widget-grid #grid
          [rows]="6"
          [columns]="6"
          [highlightNextPosition]="false"
          [showGrid]="true"
          (gridFull)="onGridFull($event)"
          (widgetPositionChange)="onWidgetChange($event)">
          <ngx-widget *ngFor="let widget of widgets;let $index = index;"
            [position]="widget.rectangle"
            [movable]="editable"
            [resizable]="editable"
            [swapOnMove]="swapWidgets">
            <div style="height:100%;width:100%; display:flex;">
              <div class="scrollbar style-scroll"
                [ngStyle]="{'background-color': widget.color}">
                <div class="tools topright"
                  *ngIf="editable">
                  <button mat-icon-button
                    class="phantom"
                    (click)="editWidget($index)">
                    <i class="fa fa-pen"></i>
                    <!-- <i class="fa fa-pencil-square-o"
                      aria-hidden="true"></i> -->
                  </button>
                  <button mat-icon-button
                    class="phantom"
                    (click)="askDeleteWidget($index)">
                    <i class="fas fa-trash"></i>
                  </button>
                </div>

                <!-- <mat-icon shape="trash"
                  class="clickable"
                  (click)="askDeleteWidget($index)"
                  *ngIf="editable"></mat-icon> -->

                <em>{{ widget.component }}</em>

                <!-- <iframe src="http://www.ville-bedee.fr/admin/upload/semaine6_2019_01.pdf"
                  width="100%"
                  height="100%"
                  align="middle"></iframe> -->
                <div class="weather">
                  <h2>Météo</h2>
                  <em>{{ widget.component }} {{ $index }}</em>
                  <app-city (change)="changeCity($event)"></app-city>

                  <mat-button-toggle-group #weatherGroup="matButtonToggleGroup"
                    aria-label="Météo"
                    [value]="weatherMode">
                    <mat-button-toggle value="{{ weatherModeEnum.Current }}">Aujourd'hui</mat-button-toggle>
                    <mat-button-toggle value="{{ weatherModeEnum.Forecast }}">toutes les 3 heures</mat-button-toggle>
                    <mat-button-toggle value="{{ weatherModeEnum.Daily }}">sur 7 jours</mat-button-toggle>
                  </mat-button-toggle-group>
                </div>

                <app-weather #weatherComponent
                  [city]="city"></app-weather>
              </div>
            </div>
          </ngx-widget>



          <!-- <ngx-widget [(position)]="rectangleDefault"
            [movable]="true"
            [resizable]="true">
            <div style="height:100%;width:100%; display:flex;">
              <div style="height:100%;width:100%; padding:10px; background-color: rgb(140, 198, 0);">
                <div class="weather">
                  <h2>Météo</h2>
                  <em>Quel temps fait-il aujourd'hui ?</em>
                  <mat-button-toggle-group #weatherGroup="matButtonToggleGroup"
                    aria-label="Météo"
                    [value]="weatherMode">
                    <mat-button-toggle value="{{ weatherModeEnum.Current }}">Aujourd'hui</mat-button-toggle>
                    <mat-button-toggle value="{{ weatherModeEnum.Forecast }}">toutes les 3 heures</mat-button-toggle>
                    <mat-button-toggle value="{{ weatherModeEnum.Daily }}">sur 7 jours</mat-button-toggle>
                  </mat-button-toggle-group>
                </div>

                <app-weather #weatherComponent></app-weather>
              </div>
            </div>
          </ngx-widget> -->
        </ngx-widget-grid>

      </div>
    </mat-sidenav-content>
  </mat-sidenav-container>

</form>